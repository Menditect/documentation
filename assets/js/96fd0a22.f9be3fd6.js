"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4039],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},f=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),f=c(n),m=r,d=f["".concat(l,".").concat(m)]||f[m]||p[m]||a;return n?i.createElement(d,s(s({ref:t},u),{},{components:n})):i.createElement(d,s({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=f;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var c=2;c<a;c++)s[c]=n[c];return i.createElement.apply(null,s)}return i.createElement.apply(null,n)}f.displayName="MDXCreateElement"},9004:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return p}});var i=n(7462),r=n(3366),a=(n(7294),n(3905)),s=["components"],o={},l="Unit testing",c={unversionedId:"bestpractice/unittest",id:"bestpractice/unittest",title:"Unit testing",description:"Definition",source:"@site/docs/bestpractice/unittest.md",sourceDirName:"bestpractice",slug:"/bestpractice/unittest",permalink:"/bestpractice/unittest",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Write a test plan",permalink:"/bestpractice/testplan"},next:{title:"Release notes",permalink:"/releasenotes/"}},u={},p=[{value:"Definition",id:"definition",level:2},{value:"Structure",id:"structure",level:2},{value:"Tips and tricks",id:"tips-and-tricks",level:2},{value:"Feedback?",id:"feedback",level:2}],f={toc:p};function m(e){var t=e.components,n=(0,r.Z)(e,s);return(0,a.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"unit-testing"},"Unit testing"),(0,a.kt)("h2",{id:"definition"},"Definition"),(0,a.kt)("p",null,"In MTA it is possible to test a small piece of Mendix code, like a single microflow, following some simple rules for the tested Mendix code, and using powerful features from MTA like asserts and data variation."),(0,a.kt)("p",null,"A unit test generally does not leave traces in the Mendix app being tested, which means the result cannot be visually inspected there."),(0,a.kt)("h2",{id:"structure"},"Structure"),(0,a.kt)("p",null,"Recommended best practice is create a draft version of a unit test that can be executed without testing other functions in the same Test Configuration. When the unit test becomes final, it is best to move it into a 'container' Test Configuration where all the unit tests for a certain Test Application are collected. This is described below. The Test Configuration can then be easily used in a regression test. "),(0,a.kt)("p",null,"A draft unit test in MTA typically looks like this:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"only one Test Suite;"),(0,a.kt)("li",{parentName:"ul"},"only one Test Case, where either Security is set to Off (because it's about testing the algorithm and not the User) or multiple copies of the same Test Case with different Execution Users;"),(0,a.kt)("li",{parentName:"ul"},"one or more Teststep(s) creating objects (or microflow calls creating objects);"),(0,a.kt)("li",{parentName:"ul"},"one or more Teststep(s) calling a microflow where some algorithm is performed, with the object(s) as a parameter;"),(0,a.kt)("li",{parentName:"ul"},"one Teststep retrieving the results and containing asserts.")),(0,a.kt)("p",null,"Finalizing a Unit Test means moving it into a 'container' Test Configuration where all the unit tests for a certain Test Application are collected. The process is basically copying the Test Suite into an existing Test Configuration, and subsequently copying the Test Case into an existing Test Suite. This is described in the ",(0,a.kt)("a",{parentName:"p",href:"../howtos/store-test-case-to-collection"},"Howto: Store Test Case to collection"),"."),(0,a.kt)("p",null,"A final unit test in MTA typically looks like this:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},'many Test Cases, completely independent from each other (not using "from previous teststep" across Test Cases);'),(0,a.kt)("li",{parentName:"ul"},"many Test Suites that each represents a certain part of the software (for instance 'CRM').")),(0,a.kt)("h2",{id:"tips-and-tricks"},"Tips and tricks"),(0,a.kt)("p",null,"Below steps are optional, not mandatory, but will make it much easier to unit test."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"First, make sure the microflow or microflows to be tested, have a ",(0,a.kt)("strong",{parentName:"li"},"single responsibility"),". This means, if multiple calculations are performed and/or objects are mutated, split up the microflow into separate microflows. This will make it possible test only one function. "),(0,a.kt)("li",{parentName:"ul"},"If it can be avoided, ",(0,a.kt)("strong",{parentName:"li"},"do not commit")," any changes to the database in the microflows that are tested. This will make it possible to test using data that only exists in memory, which is faster, but also means it is not necessary to clean up the data afterwards. This in turn will make it easier to execute multiple times in batch or using data variation."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Reuse existing masterdata")," that is necessary to test, instead of creating it from scratch. "),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Include asserts")," to check the results, for all attributes that are subject to mutation in the microflow."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Create datavariation"),", to test with different values of the attributes. Make sure to also include the asserts in the datavariation. And finally, when creating multiple columns (variations) in the datavariation, only change one attribute value per variation. ")),(0,a.kt)("h2",{id:"feedback"},"Feedback?"),(0,a.kt)("p",null,"Missing anything? ",(0,a.kt)("a",{parentName:"p",href:"mailto:support@menditect.com"},"Let us know!")),(0,a.kt)("p",null,"Last updated 21 april 2022"))}m.isMDXComponent=!0}}]);