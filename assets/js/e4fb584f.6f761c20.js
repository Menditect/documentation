"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6899],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),d=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=d(e.components);return o.createElement(l.Provider,{value:t},e.children)},c="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(n),u=a,m=c["".concat(l,".").concat(u)]||c[u]||h[u]||r;return n?o.createElement(m,i(i({ref:t},p),{},{components:n})):o.createElement(m,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:a,i[1]=s;for(var d=2;d<r;d++)i[d]=n[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2047:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var o=n(7462),a=(n(7294),n(3905));const r={},i="Frontend test with MTA",s={unversionedId:"design-tests/frontend-test-with-mta",id:"design-tests/frontend-test-with-mta",title:"Frontend test with MTA",description:"This section describes how to create a frontend test in MTA, by adding the prerequisite modules to a Mendix project.",source:"@site/additional/01-howtos/03-design-tests/frontend-test-with-mta.md",sourceDirName:"03-design-tests",slug:"/design-tests/frontend-test-with-mta",permalink:"/additional/howtos/design-tests/frontend-test-with-mta",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Run your own MTA deployment",permalink:"/additional/howtos/configure-mta/run-mta-on-premise"},next:{title:"Generate a test",permalink:"/additional/howtos/design-tests/generate-test"}},l={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Playwright Connector",id:"playwright-connector",level:3},{value:"UI Test Kit",id:"ui-test-kit",level:3},{value:"Get started",id:"get-started",level:2},{value:"Test structure",id:"test-structure",level:2},{value:"Setup (local testing)",id:"setup-local-testing",level:3},{value:"Setup (running Playwright in Browserstack)",id:"setup-running-playwright-in-browserstack",level:3},{value:"Setup (running Playwright in a Docker container)",id:"setup-running-playwright-in-a-docker-container",level:3},{value:"Locators and Actions",id:"locators-and-actions",level:3},{value:"Generic App testing",id:"generic-app-testing",level:4},{value:"Mendix App testing",id:"mendix-app-testing",level:4},{value:"Session handling",id:"session-handling",level:3},{value:"Testing Mendix Platform Supported Widgets",id:"testing-mendix-platform-supported-widgets",level:2},{value:"Testing Custom Widgets and Snippets",id:"testing-custom-widgets-and-snippets",level:2},{value:"Custom Widgets",id:"custom-widgets",level:3},{value:"Snippets",id:"snippets",level:3},{value:"Feedback?",id:"feedback",level:2}],p={toc:d},c="wrapper";function h(e){let{components:t,...r}=e;return(0,a.kt)(c,(0,o.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"frontend-test-with-mta"},"Frontend test with MTA"),(0,a.kt)("p",null,"This section describes how to create a frontend test in MTA, by adding the prerequisite modules to a Mendix project."),(0,a.kt)("admonition",{title:"In Progress",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"This part of the documentation is currently incomplete.\nIt will be incrementally updated in the following weeks.")),(0,a.kt)("admonition",{title:"Playwright",type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Menditect uses the Playwright runtime to execute these frontend tests.\nPlaywright is a library with which you can locate elements on a web page and execute actions on these elements.\nSee ",(0,a.kt)("a",{parentName:"p",href:"https://playwright.dev/java/"},"https://playwright.dev/java/")," for the relevant documentation.")),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("p",null,"Download below modules from the Mendix marketplace to enable frontend testing."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"If you want access to these modules, please ",(0,a.kt)("a",{parentName:"strong",href:"mailto:support@menditect.com"},"contact support"),".")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The Playwright Connector",(0,a.kt)("br",null)),(0,a.kt)("li",{parentName:"ul"},"The Playwright UI Test Kit",(0,a.kt)("br",null)),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("a",{parentName:"li",href:"../connect-mta/import-plugin"},"MTA Plugin")," ")),(0,a.kt)("h3",{id:"playwright-connector"},"Playwright Connector"),(0,a.kt)("p",null,"The Playwright Connector makes it possible to define and run a frontend test from any Mendix App. It enables the App to connect to the Playwright server, based on specified connection settings, and execute the test. When executing a UI test, Playwright starts and hosts its own browser. This can be Chromium, Firefox or Webkit. In order to do this, Playwright needs to load required dependencies and, therefore, it needs the right permissions on the host server. In the image below, you can see how Playwright can be hosted on remote servers, either in the cloud or on a local server."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Playwright Setup",src:n(1853).Z,width:"624",height:"347"})),(0,a.kt)("p",null,"The Playwright Connector includes Locator microflows to find elements on a webpage, and Action microflows to click on elements, fill them with text, or select a value. Therefore it can be used to test ",(0,a.kt)("em",{parentName:"p"},"any")," webapplication, not just Mendix Apps. Locator and Action microflows in the Playwright Connector can be defined and executed from MTA."),(0,a.kt)("h3",{id:"ui-test-kit"},"UI Test Kit"),(0,a.kt)("p",null,"The UI Test Kit is meant specifically to define and run frontend tests for Mendix apps. It contains Reusable Locator and Action microflows to test Mendix Platform Supported Widgets."),(0,a.kt)("p",null,"A few notes about the UI Test Kit:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The UI Test Kit currently has the en-US and nl-NL languages built-in. "),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.mendix.com/refguide/mendix-client/react/"},"React-enabled projects")," can be tested by setting the Constant IsUsingReactClient to True."),(0,a.kt)("li",{parentName:"ul"},"Although more Widgets may be added as supported in the UI Test Kit, any changes made in the future can break Locating a Widget correctly.")),(0,a.kt)("h2",{id:"get-started"},"Get started"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Start by importing the Playwright Connector. This module ",(0,a.kt)("strong",{parentName:"li"},"requires the playwright driver bundle")," jar file in your userlib directory if you want to ",(0,a.kt)("a",{parentName:"li",href:"#setup-local-testing"},"run Playwright on your local machine"),". Download the jar file here: ",(0,a.kt)("a",{parentName:"li",href:"https://repo1.maven.org/maven2/com/microsoft/playwright/driver-bundle/1.53.0/driver-bundle-1.53.0.jar"},"https://repo1.maven.org/maven2/com/microsoft/playwright/driver-bundle/1.53.0/driver-bundle-1.53.0.jar")),(0,a.kt)("li",{parentName:"ul"},"Download the UI Test Kit module to start testing the most common Mendix Widgets. This module ",(0,a.kt)("strong",{parentName:"li"},"requires the Apache Commons Lang")," jar file in your userlib directory. Download the jar file here: ",(0,a.kt)("a",{parentName:"li",href:"https://repo1.maven.org/maven2/org/apache/commons/commons-lang3/3.12.0/commons-lang3-3.12.0.jar"},"https://repo1.maven.org/maven2/org/apache/commons/commons-lang3/3.12.0/commons-lang3-3.12.0.jar")),(0,a.kt)("li",{parentName:"ul"},"Add both the Module Roles to the project's User Roles."),(0,a.kt)("li",{parentName:"ul"},"Download and import ",(0,a.kt)("a",{target:"_blank",href:n(6210).Z},"this Snippet")," into your Mendix App, add it to a Page that is accessible for Users that will be evaluating executed frontend Tests.")),(0,a.kt)("h2",{id:"test-structure"},"Test structure"),(0,a.kt)("p",null,"Each frontend test has the same basic structure:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Start Test"),(0,a.kt)("li",{parentName:"ul"},"Locators and Actions"),(0,a.kt)("li",{parentName:"ul"},"Stop Test")),(0,a.kt)("h3",{id:"setup-local-testing"},"Setup (local testing)"),(0,a.kt)("p",null,"Playwright can be hosted locally with the Mendix App running in Studio Pro (e.g. localhost). For this, you only need to add the necessary jar file (driver-bundle.jar) to the /userlib folder of the Mendix project. If this jar file is added to the Mendix project and the app is deployed to a local server that allows Playwright to load the dependencies it needs, this is sufficient for executing the Test Cases. Separate hosting of the Playwright browsers is not needed then. However, if the jar-file is not added and/or the local server is also limited in the access it requires for Playwright to load its dependencies, it is needed to host a Playwright server elsewhere. "),(0,a.kt)("admonition",{title:"Licensed Mendix node not supported",type:"note"},(0,a.kt)("p",{parentName:"admonition"},"The Mendix Cloud currently does not allow for third party frameworks, like Playwright, to load its own dependencies. This is why it is currently not possible to use UI testing in MTA when the app under test is hosted in the Mendix Cloud.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"                                                                                            |\n")),(0,a.kt)("h3",{id:"setup-running-playwright-in-browserstack"},"Setup (running Playwright in Browserstack)"),(0,a.kt)("p",null,"One alternative option to hosting Playwright locally is to use Browserstack. BrowserStack is a cloud-based testing platform that enables developers and QA teams to test applications across various browsers and devices. It offers native support for Playwright, allowing users to run automated end-to-end tests on real devices and browsers within its cloud infrastructure. "),(0,a.kt)("p",null,'To test using BrowserStack, replace the call to the "Create_Browser" microflow, with a call to the "Connect_BrowserStack" microflow.'),(0,a.kt)("p",null,"Currently, using Browserstack is only supported if the Mendix App is running in the cloud.\nLocal Testing is currently only supported if Playwright is also running locally.\n",(0,a.kt)("a",{parentName:"p",href:"https://www.browserstack.com/docs/local-testing"},"Local Testing with Browserstack")," will be supported in a future release of the Playwright Connector."),(0,a.kt)("h3",{id:"setup-running-playwright-in-a-docker-container"},"Setup (running Playwright in a Docker container)"),(0,a.kt)("p",null,"This chapter describes the situation where the Test Application is started from Studio Pro, and Docker Desktop is running on the same machine. When running the Test Application in the cloud, the URL in the Navigate action in step 19 will be replaced by the Application URL in the cloud. When running Docker in the cloud, omit the steps to install Docker Desktop, and replace the command in step 9 by the one noted in ",(0,a.kt)("a",{parentName:"p",href:"https://playwright.dev/docs/docker#running-the-playwright-server"},"https://playwright.dev/docs/docker#running-the-playwright-server"),"."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Install Docker Desktop ",(0,a.kt)("a",{parentName:"li",href:"https://www.docker.com/products/docker-desktop/"},"https://www.docker.com/products/docker-desktop/"),"."),(0,a.kt)("li",{parentName:"ol"},"Although not always required by Docker, restart Windows."),(0,a.kt)("li",{parentName:"ol"},"Start Studio Pro that will run the Test Application and connect to MTA. "),(0,a.kt)("li",{parentName:"ol"},"Make sure the Connector and Mx UI Testkit are imported."),(0,a.kt)("li",{parentName:"ol"},"Check the playwright version that is being used by the Connector.\nThis should be noted in the documentation in the Mendix Marketplace."),(0,a.kt)("li",{parentName:"ol"},"Run the Test Application. Check MTA to see if it's connected."),(0,a.kt)("li",{parentName:"ol"},"Run Docker Desktop. No need to sign-in, just click Skip."),(0,a.kt)("li",{parentName:"ol"},"Run a command line prompt (cmd)."),(0,a.kt)("li",{parentName:"ol"},"Copy the command line noted here into a text editor (use the copy button): ",(0,a.kt)("a",{parentName:"li",href:"https://playwright.dev/docs/docker#network-configuration"},"https://playwright.dev/docs/docker#network-configuration"),"."),(0,a.kt)("li",{parentName:"ol"},"Replace the two parts where the playwright version is denoted, by the playwright version in use by the Connector. Example:",(0,a.kt)("br",null),(0,a.kt)("inlineCode",{parentName:"li"},'docker run --add-host=hostmachine:host-gateway -p 3000:3000 --rm --init -it --workdir /home/pwuser --user pwuser mcr.microsoft.com/playwright:v1.53.0-noble /bin/sh -c "npx -y playwright@1.53.0 run-server --port 3000 --host 0.0.0.0"')),(0,a.kt)("li",{parentName:"ol"},"Copy and paste the command line in the prompt and press Enter.",(0,a.kt)("br",null),"This will do three things:",(0,a.kt)("br",null),"1. download the docker image containing the playwright server",(0,a.kt)("br",null),"2. run this image in a virtualized Docker container",(0,a.kt)("br",null),"3. make sure that the hostmachine can be reached from the container."),(0,a.kt)("li",{parentName:"ol"},"Wait until it says ",(0,a.kt)("inlineCode",{parentName:"li"},"Listening on ws://0.0.0.0:3000/")," in the prompt."),(0,a.kt)("li",{parentName:"ol"},"Create a Test Case that uses the Test Application."),(0,a.kt)("li",{parentName:"ol"},"Add a microflow teststep to Start_Playwright_Test."),(0,a.kt)("li",{parentName:"ol"},"Add a microflow teststep to Connect_Playwright_Server, with URL: ws://0.0.0.0:3000/"),(0,a.kt)("li",{parentName:"ol"},"Add a microflow teststep to Create_BrowserContext; Viewport can be left empty."),(0,a.kt)("li",{parentName:"ol"},"Add a microflow teststep to Create_Page."),(0,a.kt)("li",{parentName:"ol"},"Add a microflow teststep to Start_Tracing. This is required if you want to visually inspect any of the results, because you cannot view the output of the browser in real time."),(0,a.kt)("li",{parentName:"ol"},"Add a microflow teststep to Navigate. Important: you cannot navigate to localhost, because the localhost will point to inside the virtualized container. You have to navigate to http://hostmachine:8080 (assuming the Test Application is running on port 8080). This will only work if you correctly executed step 10."),(0,a.kt)("li",{parentName:"ol"},"Build your UI test like you otherwise would."),(0,a.kt)("li",{parentName:"ol"},"Make sure to add Page_Screenshot teststeps to check important results."),(0,a.kt)("li",{parentName:"ol"},"Make sure to end with Stop_Tracing and Stop_Playwright_Test."),(0,a.kt)("li",{parentName:"ol"},"Run your test!"),(0,a.kt)("li",{parentName:"ol"},"To shutdown the locally running docker container simply press Ctrl+C in the prompt.")),(0,a.kt)("h3",{id:"locators-and-actions"},"Locators and Actions"),(0,a.kt)("h4",{id:"generic-app-testing"},"Generic App testing"),(0,a.kt)("p",null,"To perform an action on an element in the page, the basic structure is to use two microflows; a Locator microflow and an Action microflow. Sometimes calling a second Locator microflow is needed."),(0,a.kt)("p",null,'In the Playwright Connector, Locator microflows are inside the "Microflows/Commands" folder. The "Get_Locator_By_Page" folder contains Locators that have the complete Browser Page as scope to locate any HTML element. The "Get_Locator_By_Locator" folder contains the same Locators, but using another Locator that narrows the scope within to locate the HTML element.  Another way to narrow down the list is using the microflows inside the "Locator_Element_Operations" folder, containing ',(0,a.kt)("a",{parentName:"p",href:"https://playwright.dev/java/docs/locators#filtering-locators"},"Filters")," and ",(0,a.kt)("a",{parentName:"p",href:"https://playwright.dev/java/docs/other-locators#n-th-element-locator"},"Nth element locators"),'. In order to use XPath or CSS Locators, use the "...Get_By_Selector" microflows. '),(0,a.kt)("p",null,'Locator Actions are in the "Locator_Actions" folder. Note that some Actions will wait for the element to become visible, others (like "Locator_Element_Count") will be executed immediately. If it is required to wait, it is recommended to use the "Delay after execution" property on the ',(0,a.kt)("a",{parentName:"p",href:"../../../Teststep#properties"},"Teststep in MTA")," that calls the Locator Action microflow."),(0,a.kt)("p",null,"For more advanced usage, checkout the Playwright documentation for ",(0,a.kt)("a",{parentName:"p",href:"https://playwright.dev/java/docs/locators"},"Locators")," and ",(0,a.kt)("a",{parentName:"p",href:"https://playwright.dev/java/docs/input"},"Actions"),"."),(0,a.kt)("h4",{id:"mendix-app-testing"},"Mendix App testing"),(0,a.kt)("p",null,"In order to identify a Mendix Page, it is necessary to fill in the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.mendix.com/refguide/common-widget-properties/#class"},"Page class on the Mendix Page in Studio Pro"),". "),(0,a.kt)("admonition",{title:"Recommended",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Assign the same Class name on the Page as the Page's Title. ")),(0,a.kt)("h3",{id:"session-handling"},"Session handling"),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"../../../test-case"},"Test Case")," containing the Teststeps should be using an Account with dedicated UserRoles in the Connector & UI Test Kit Playwright modules (for example, ",(0,a.kt)("inlineCode",{parentName:"p"},"UiTestUser"),") as an Execution user, with the Apply-security Enabled. Although MTA creates it's own user session to perform actions in a Test Case, it is still necessary to login to the App under test when using MTA. "),(0,a.kt)("p",null,"The upside of the current implementation is that sessions created by Playwright can be carried onto subsequent Test Cases. Just point to the ",(0,a.kt)("inlineCode",{parentName:"p"},"MenditectPlaywrightConnector.Page")," object that was created in a Test Case, whenever calling a Locator microflow, and the same browser tab will be used to run the test. "),(0,a.kt)("p",null,"When running Playwright on your local machine from Studio Pro, the free license will only allow for so many user sessions. Therefore, a few tips:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"prevent using Anonymous sessions;"),(0,a.kt)("li",{parentName:"ul"},"always logout at the end when creating a Playwright session;"),(0,a.kt)("li",{parentName:"ul"},"prevent also manually logging in from your own browser;"),(0,a.kt)("li",{parentName:"ul"},"restart the App if needed.")),(0,a.kt)("h2",{id:"testing-mendix-platform-supported-widgets"},"Testing Mendix Platform Supported Widgets"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://marketplace.mendix.com/link/supporttype/Platform"},"Click here to see a list of recent Platform supported Widgets")),(0,a.kt)("h2",{id:"testing-custom-widgets-and-snippets"},"Testing Custom Widgets and Snippets"),(0,a.kt)("h3",{id:"custom-widgets"},"Custom Widgets"),(0,a.kt)("p",null,'Mendix will add the "mx-name-',(0,a.kt)("inlineCode",{parentName:"p"},"widgetName"),'" class to every widget on the Page, so it is always possible to create a Locator for the surrounding HTML element. However in most cases you will want to add another Locator inside that Locator, so define Actions for child elements.'),(0,a.kt)("h3",{id:"snippets"},"Snippets"),(0,a.kt)("p",null,"Snippets are not rendered as HTML elements by Mendix, even though Mendix does allow for adding a Class to a Snippet. "),(0,a.kt)("p",null,"In order to define Locators for Widgets inside a Snippet, add a surrounding Container rendered as a DIV element, with a representable name, to locate it."),(0,a.kt)("h2",{id:"feedback"},"Feedback?"),(0,a.kt)("p",null,"Missing anything? ",(0,a.kt)("a",{parentName:"p",href:"mailto:support@menditect.com"},"Let us know!")),(0,a.kt)("p",null,"Last updated 5 september 2025"))}h.isMDXComponent=!0},6210:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/files/SNIP_Playwright_Files-296045caacd2abe5640c62cfd3575a39.mpk"},1853:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/pw_setup-5eaabef3e36faf81940b0adc065ba009.png"}}]);