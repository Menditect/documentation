# Record user actions

For many user actions performed in the [Test Application](../refguide/test-application), it is possible to record these actions in MTA, and convert them to either Object [Teststeps](../refguide/teststep) or Microflow Teststeps.

## Prepare project for recording

Before starting the recording, it is useful to follow these guidelines first.
- Create a draft first, either using [Test Instructions](../refguide/test-instruction) in MTA or a simple text tool like notepad.
- Prepare the microflows for recording, following the the steps in [this section](prepare-mendix-project).
- Select an appropriate [Test Case](../refguide/test-case), preferably one without existing Teststeps.
- Make sure the Execution User for the selected Test Case exists, is active and not blocked.
- Login to the Test Application using the Execution User for the selected Test Case.
- Create separate recordings for each transaction, each in their own Test Case. 

## Create a recording

Please read the reference guide for [Recording](../refguide/recording#create-a-recording) for this.

## Finalize a recording

If the Teststeps generated by the recorder do not yield any construction errors, always execute the generated Teststeps to validate the outcome.
Depending on the Mendix model, it may be necessary to manually review the configuration of the teststeps and validate that the outcome is as expected. 

### Selecting objects using attribute constraints

An existing object that is subsequently used in a Change Object Teststep or passed as a parameter in a Microflow Teststep, can be retrieved using a Retrieve Object Teststep. However it is not always possible to determine which members are used as constraints in that Teststep. 
- Such Teststeps will be marked in a separate color to indicate they need to be reviewed.

Note that only constraining members that are also visible in the Client are included in the created Teststeps.

### Selecting objects using association constraints

It is also possible that the constraint to retrieve an object is not on the object itself, but on an associated object. The associated object needs to be retrieved by a previous teststep, that will not be created by the recorder. 
- Create a previous teststep to achieve this.

### Object handling in microflows

If an object is created or changed by a microflow the recorder will create a Microflow Teststep calling that creation microflow. If the object is subsequently committed by a microflow, the recorder will create a second Microflow Teststep calling that save microflow. Also, the recorder will create a Change Object Teststep between the two Microflow Teststeps, where the values set in the page by the user are set.

Therefore, creating and saving objects using microflows is preferred over using page actions.

### Object handling in pages

If an object is created by the page and not by a microflow (for instance using a "Create Button" in Mendix) the recorder will create a Create Object Teststep without any members. The values set in the page by the user need to be set in MTA as well. If the object is subsequently committed (saved to the database) also by the page (for instance using a "Save changes" button) and not by a microflow, the recorder will not create a Persist Object Test Step to achieve this. 
- Manually set the members in the Create Object Teststep.
- Manually include a Persist Object Teststep to save changes to the database.

### Date and time handling

All datetime values are set as fixed instead of current datetime with an offset.
- Check datetime attribute values and make sure to change them to current datetime with an offset where necessary. 

### Rollback 

If an object is created and subsequently rolled back by the page and not by a microflow (for instance using a "Cancel changes" button in Mendix) it is not possible for the recorder to determine this rollback has taken place. 
- If testing the rollback action is the goal of the Test Case, it is advisable to include a Rollback action in a microflow and not in the page. 
- Otherwise for obvious reasons, it is advisable to only record actions that are part of the test. 

### Delete

Deletes are not yet part of the recorder. 
- If an object is deleted either in a microflow or in a page, manually include a Delete Object Teststep, and a subsequent Persist Object Teststep to finalize the delete.

## Troubleshooting

| A recording results in many (often identical) teststeps | 
| ----------- | 
| In some cases MTA creates many teststeps after finishing the recording or gives a message that the maximum amount of recorded user actions is exceeded. The reason could be that a microflow is executed many times, for instance for each row in a datagrid or listview, or for each change on a page element like a textbox or radiobutton. Ideally, the recorded page(s) or microflow(s) are optimized to prevent this, but this may not always be achievable. In that case it is advisable to limit the amount of test data to only a few test records. | 


| MTA is unable to set enumeration value | 
| ----------- | 
| In some cases the recorder is not able to determine an enumeration value. This happens when an enumeration value is deleted from Mendix, but not yet from the database, because a migration script has not yet been executed on the table where the enumeration is used.  | 

## Important notes
- Only actions performed by the user that is set as the execution user will be recorded.
- No other users should login under the same username on the test environment while recording.
- Microflows used as datasource will not result in a Microflow Teststep, but in a Retrieve Object Teststep, and only if the object is used.

## Feedback?
Missing anything? [Let us know!](mailto:support@menditect.com)

Last updated 1 may 2022